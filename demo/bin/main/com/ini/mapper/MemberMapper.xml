<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.ini.member.mapper.MemberMapper">

  <select id="findAllMember"
    resultType="com.ini.member.vo.MemberDTO">
    select user_id, user_password, user_nickname, user_email, user_phone_number, user_profile_img
    from ini_user
  </select>

  <select id="findMemberById"
    resultType="com.ini.member.vo.MemberDTO">
    select user_id, user_password, user_nickname, user_email, user_phone_number, user_profile_img
    from ini_user
    where user_id = #{user_id}
  </select>

  <select id="findFollowById"
    resultType="com.ini.member.vo.MemberFollowDTO">
    select follower_id, followee_id, follow_date
    from user_follow
    where follower_id = #{user_id, jdbcType=VARCHAR}
  </select>

  <select id="findBoardById"
    resultType="com.ini.board.vo.BoardDTO">
    select board_id, user_id, board_title, board_content, board_date
    from ini_board
    where user_id = #{user_id, jdbcType=VARCHAR}
  </select>

  <select id="findLikeById"
    resultType="com.ini.board.vo.BoardLikeDTO">
    select like_id, user_id, board_id, like_date
    from board_like
    where user_id = #{user_id, jdbcType=VARCHAR}
  </select>

  <select id="findReplyById"
    resultType="com.ini.board.vo.BoardReplyDTO">
    select reply_id, board_id, reply_writer, reply_content, reply_date
    from board_reply
    where reply_writer = #{user_id, jdbcType=VARCHAR}
  </select>

  <select id="findFavoriteById"
    resultType="com.ini.member.vo.MemberFavoriteDTO">
    select favorite_id, user_id, favorite_type, favorite_date
    from user_favorite
    where user_id = #{user_id, jdbcType=VARCHAR}
  </select>

  <insert id="insertOAuthUser"
    parameterType="com.ini.member.vo.MemberDTO">
    INSERT INTO ini_user (user_id, user_password, user_nickname, user_email,
    user_phone_number, user_profile_img)
    VALUES (
      #{user_id, jdbcType=VARCHAR},
      #{user_password, jdbcType=VARCHAR},
      #{user_nickname, jdbcType=VARCHAR},
      #{user_email, jdbcType=VARCHAR},
      #{user_phone_number, jdbcType=VARCHAR},
      #{user_profile_img, jdbcType=BLOB}
    )
  </insert>

</mapper>
