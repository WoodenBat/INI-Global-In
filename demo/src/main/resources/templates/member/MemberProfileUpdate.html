<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>프로필 이미지 업로드</title>
</head>
<body>
	<form id="profileImageForm" th:action="@{/member/memberProfileUpdate}" method="post" enctype="multipart/form-data">
  <input type="hidden" th:name="감자" th:value="123" />
  <label for="profileUploadInput">
    <img th:src="@{${member_info.user_profile_img != null} ? '/images/profile/' + ${member_info.user_profile_img} : '/images/default-profile.png'}"
      class="profile_image" alt="프로필 사진" />
  </label> 
  <input id="profileUploadInput" type="file" name="profileImage" accept="image/*" style="display: none;" />
</form>

	<script>
  const fileInput = document.getElementById('profileUploadInput');
  const form = document.getElementById('profileImageForm');

  fileInput.addEventListener('change', function() {
    if(this.files.length > 0) {
      if(confirm('선택한 이미지로 프로필 사진을 변경하시겠습니까?')) {
        form.submit();
      } else {
        // 선택 취소 시 파일 선택 초기화
        this.value = '';
      }
    }
  });

  
  
</script>
</body>
</html>