<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title th:text="${board.board_title}">ê²Œì‹œê¸€ ë³´ê¸°</title>
</head>
<body>

<h1 th:text="${board.board_title}">ì œëª©</h1>

<div>
    <p><strong>ë§ë¨¸ë¦¬:</strong> <span th:text="${board.tag_name}"></span></p>
    <p><strong>ì¹´í…Œê³ ë¦¬:</strong> <span th:text="${board.category_name}"></span></p>
    <p><strong>ì‘ì„±ì:</strong> <span th:text="${board.user_nickname}"></span></p>
    <p><strong>ì‘ì„±ì¼:</strong> <span th:text="${#dates.format(board.board_write_date, 'yyyy-MM-dd HH:mm')}"></span></p>
    <p><strong>ì¡°íšŒìˆ˜:</strong> <span th:text="${board.board_views}"></span></p>
</div>

<hr>

<!-- ê²Œì‹œê¸€ ë³¸ë¬¸ -->
<div th:utext="${board.board_content}">ë³¸ë¬¸</div>

<!-- ì²¨ë¶€ ì´ë¯¸ì§€ í‘œì‹œ -->
<div>
    <h3>ì²¨ë¶€ ì´ë¯¸ì§€</h3>
    <div th:each="img : ${imageList}">
        <img th:src="@{'/upload/' + ${img}}" style="max-width: 300px; display:block; margin-bottom: 10px;" />
    </div>
</div>

<hr>

<!-- í•˜ë‹¨ ë²„íŠ¼ ì˜ì—­ -->
<div>
    <a th:href="@{/board/list}">ëª©ë¡</a>
    <a th:href="@{'/board/edit/' + ${board.board_id}}">ìˆ˜ì •</a>
    <form th:action="@{'/board/delete/' + ${board.board_id}}" method="post" style="display:inline;">
        <button type="submit" onclick="return confirm('ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')">ì‚­ì œ</button>
    </form>
</div>

<!-- ì¢‹ì•„ìš” ë²„íŠ¼ -->
<button id="likeBtn">
  <span id="likeIcon" th:text="${liked} ? 'â¤ï¸' : 'ğŸ¤'"></span>
  <span id="likeCount" th:text="${likeCount}">0</span>
</button>

<script>
document.getElementById("likeBtn").addEventListener("click", function() {
  const boardId = [[${board.board_id}]];
  fetch(`/board/like/${boardId}`, {
    method: 'POST'
  })
  .then(res => res.json())
  .then(data => {
    document.getElementById("likeIcon").textContent = data.liked ? 'â¤ï¸' : 'ğŸ¤';
    document.getElementById("likeCount").textContent = data.likeCount;
  });
});
</script>


</body>
</html>
